% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plotly_funs.R
\name{plotly_prefade_others}
\alias{plotly_prefade_others}
\title{Prefade non-selected geos in a Plotly chart and toggle color/legend on click}
\usage{
plotly_prefade_others(
  p,
  keep_geos,
  gray_color = "#d3d3d3",
  keep_download_only = TRUE
)
}
\arguments{
\item{p}{A Plotly object created e.g. by \code{\link[plotly]{ggplotly}}.}

\item{keep_geos}{Character vector of geo codes that should start colored and
visible in the legend.}

\item{gray_color}{Hex color used for faded traces (default \code{"#d3d3d3"}).}

\item{keep_download_only}{Logical; if \code{TRUE} (default) keep only the
"Download as PNG" button and hide the Plotly logo.}
}
\value{
A modified Plotly object with custom initial styling and an interactive
click handler to toggle trace color and legend visibility.
}
\description{
Takes a Plotly object (e.g., from \code{\link[plotly]{ggplotly}}),
keeps traces listed in \code{keep_geos} with their original colors and visible
in the legend, and renders all other traces initially in a light gray color
(hidden from the legend). Clicking a gray line toggles it to its original
color and adds it to the legend; clicking again fades it back and hides it.
}
\details{
Trace name detection is based on \code{trace$name} or \code{trace$legendgroup}
after stripping common prefixes (e.g. \code{"geo="}) and anything after a comma.
}
\examples{
\dontrun{
pp <- ggplot2::ggplot(dat, ggplot2::aes(time, values, colour = geo)) +
  ggplot2::geom_line()
p  <- plotly::ggplotly(pp)
p2 <- plotly_prefade_others(p, keep_geos = c("FI","SE","EA20","US"))
p2
}
}
